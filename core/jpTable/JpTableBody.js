"use strict";

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.default = void 0;

var _react = _interopRequireDefault(require("react"));

var _propTypes = _interopRequireDefault(require("prop-types"));

var _styles = require("@material-ui/core/styles");

var _core = require("@material-ui/core");

var _Create = _interopRequireDefault(require("@material-ui/icons/Create"));

var _DeleteSharp = _interopRequireDefault(require("@material-ui/icons/DeleteSharp"));

var _store = require("./store/store");

var _JpTableStyles = require("./styles/JpTableStyles");

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

var useStyles = (0, _styles.makeStyles)(_JpTableStyles.JpTableStyles);

function desc(a, b, orderBy) {
  if (b[orderBy] < a[orderBy]) {
    return -1;
  }

  if (b[orderBy] > a[orderBy]) {
    return 1;
  }

  return 0;
}

function stableSort(array, cmp) {
  var stabilizedThis = array.map(function (el, index) {
    return [el, index];
  });
  stabilizedThis.sort(function (a, b) {
    var order = cmp(a[0], b[0]);
    if (order !== 0) return order;
    return a[1] - b[1];
  });
  return stabilizedThis.map(function (el) {
    return el[0];
  });
}

function getSorting(order, orderBy) {
  return order === "desc" ? function (a, b) {
    return desc(a, b, orderBy);
  } : function (a, b) {
    return -desc(a, b, orderBy);
  };
}

function JpTableBody(_ref) {
  var columnsData = _ref.columnsData,
      tableSetting = _ref.tableSetting,
      usersData = _ref.usersData,
      searchSwitch = _ref.searchSwitch,
      handleClick = _ref.handleClick,
      onEditClick = _ref.onEditClick,
      onRemoveClick = _ref.onRemoveClick;
  var classes = useStyles(); //context API START

  var _React$useContext = _react.default.useContext(_store.MainTableContext),
      state = _React$useContext.state;

  var order = state.order,
      orderBy = state.orderBy,
      selected = state.selected,
      page = state.page,
      rowsPerPage = state.rowsPerPage,
      searchTerm = state.searchTerm,
      multiSearchTerms = state.multiSearchTerms; //context API END

  var isSelected = function isSelected(id) {
    return selected.indexOf(id) !== -1;
  };

  var emptyRows = rowsPerPage - Math.min(rowsPerPage, usersData.length - page * rowsPerPage);
  return _react.default.createElement(_core.TableBody, null, stableSort(searchSwitch(searchTerm, multiSearchTerms, usersData), getSorting(order, orderBy)).slice(page * rowsPerPage, page * rowsPerPage + rowsPerPage).map(function (row, index) {
    var isItemSelected = isSelected(row.id);
    var labelId = "enhanced-table-checkbox-".concat(index);
    return _react.default.createElement(_core.TableRow, {
      hover: true,
      role: "checkbox",
      "aria-checked": isItemSelected,
      tabIndex: -1,
      key: index,
      selected: isItemSelected
    }, _react.default.createElement(_core.TableCell, {
      padding: "checkbox"
    }, _react.default.createElement(_core.Checkbox, {
      checked: isItemSelected,
      inputProps: {
        "aria-labelledby": labelId
      },
      onClick: function onClick(event) {
        return handleClick(event, row.id);
      }
    })), columnsData.map(function (data, index) {
      return _react.default.createElement(_core.TableCell, {
        component: "th",
        key: index
      }, row[columnsData[index].id]);
    }), tableSetting.hasEditing ? _react.default.createElement(_core.TableCell, {
      className: classes.tableCell
    }, _react.default.createElement(_Create.default, {
      onClick: function onClick() {
        onEditClick(row);
      }
    })) : null, tableSetting.hasDeleting ? _react.default.createElement(_core.TableCell, {
      className: classes.tableCell
    }, _react.default.createElement(_DeleteSharp.default, {
      onClick: function onClick() {
        onRemoveClick(row);
      }
    })) : null);
  }), emptyRows > 0 && _react.default.createElement(_core.TableRow, {
    style: {
      height: 49 * emptyRows
    }
  }, _react.default.createElement(_core.TableCell, {
    colSpan: 6
  })));
}

JpTableBody.prototypes = {
  columnsData: _propTypes.default.array.isRequired,
  tableSetting: _propTypes.default.object.isRequired,
  usersData: _propTypes.default.array.isRequired,
  searchSwitch: _propTypes.default.func.isRequired,
  handleClick: _propTypes.default.func.isRequired,
  onEditClick: _propTypes.default.func,
  onRemoveClick: _propTypes.default.func
};
var _default = JpTableBody;
exports.default = _default;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uLy4uL3NyYy9jb21wb25lbnRzL2pwVGFibGUvSnBUYWJsZUJvZHkuanMiXSwibmFtZXMiOlsidXNlU3R5bGVzIiwiSnBUYWJsZVN0eWxlcyIsImRlc2MiLCJhIiwiYiIsIm9yZGVyQnkiLCJzdGFibGVTb3J0IiwiYXJyYXkiLCJjbXAiLCJzdGFiaWxpemVkVGhpcyIsIm1hcCIsImVsIiwiaW5kZXgiLCJzb3J0Iiwib3JkZXIiLCJnZXRTb3J0aW5nIiwiSnBUYWJsZUJvZHkiLCJjb2x1bW5zRGF0YSIsInRhYmxlU2V0dGluZyIsInVzZXJzRGF0YSIsInNlYXJjaFN3aXRjaCIsImhhbmRsZUNsaWNrIiwib25FZGl0Q2xpY2siLCJvblJlbW92ZUNsaWNrIiwiY2xhc3NlcyIsIlJlYWN0IiwidXNlQ29udGV4dCIsIk1haW5UYWJsZUNvbnRleHQiLCJzdGF0ZSIsInNlbGVjdGVkIiwicGFnZSIsInJvd3NQZXJQYWdlIiwic2VhcmNoVGVybSIsIm11bHRpU2VhcmNoVGVybXMiLCJpc1NlbGVjdGVkIiwiaWQiLCJpbmRleE9mIiwiZW1wdHlSb3dzIiwiTWF0aCIsIm1pbiIsImxlbmd0aCIsInNsaWNlIiwicm93IiwiaXNJdGVtU2VsZWN0ZWQiLCJsYWJlbElkIiwiZXZlbnQiLCJkYXRhIiwiaGFzRWRpdGluZyIsInRhYmxlQ2VsbCIsImhhc0RlbGV0aW5nIiwiaGVpZ2h0IiwicHJvdG90eXBlcyIsIlByb3BUeXBlcyIsImlzUmVxdWlyZWQiLCJvYmplY3QiLCJmdW5jIl0sIm1hcHBpbmdzIjoiOzs7Ozs7O0FBQUE7O0FBQ0E7O0FBQ0E7O0FBQ0E7O0FBQ0E7O0FBQ0E7O0FBQ0E7O0FBRUE7Ozs7QUFDQSxJQUFNQSxTQUFTLEdBQUcsd0JBQVdDLDRCQUFYLENBQWxCOztBQUVBLFNBQVNDLElBQVQsQ0FBY0MsQ0FBZCxFQUFpQkMsQ0FBakIsRUFBb0JDLE9BQXBCLEVBQTZCO0FBQzNCLE1BQUlELENBQUMsQ0FBQ0MsT0FBRCxDQUFELEdBQWFGLENBQUMsQ0FBQ0Us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LENBQWVGLFVBTEw7QUFNdkIvQixFQUFBQSxXQUFXLEVBQUU4QixtQkFBVUcsSUFOQTtBQU92QmhDLEVBQUFBLGFBQWEsRUFBRTZCLG1CQUFVRztBQVBGLENBQXpCO2VBVWV2QyxXIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IFJlYWN0IGZyb20gXCJyZWFjdFwiO1xyXG5pbXBvcnQgUHJvcFR5cGVzIGZyb20gXCJwcm9wLXR5cGVzXCI7XHJcbmltcG9ydCB7IG1ha2VTdHlsZXMgfSBmcm9tIFwiQG1hdGVyaWFsLXVpL2NvcmUvc3R5bGVzXCI7XHJcbmltcG9ydCB7IENoZWNrYm94LCBUYWJsZUJvZHksIFRhYmxlQ2VsbCwgVGFibGVSb3cgfSBmcm9tIFwiQG1hdGVyaWFsLXVpL2NvcmVcIjtcclxuaW1wb3J0IENyZWF0ZUljb24gZnJvbSBcIkBtYXRlcmlhbC11aS9pY29ucy9DcmVhdGVcIjtcclxuaW1wb3J0IERlbGV0ZVNoYXJwSWNvbiBmcm9tIFwiQG1hdGVyaWFsLXVpL2ljb25zL0RlbGV0ZVNoYXJwXCI7XHJcbmltcG9ydCB7IE1haW5UYWJsZUNvbnRleHQgfSBmcm9tIFwiLi9zdG9yZS9zdG9yZVwiO1xyXG5cclxuaW1wb3J0IHsgSnBUYWJsZVN0eWxlcyB9IGZyb20gXCIuL3N0eWxlcy9KcFRhYmxlU3R5bGVzXCI7XHJcbmNvbnN0IHVzZVN0eWxlcyA9IG1ha2VTdHlsZXMoSnBUYWJsZVN0eWxlcyk7XHJcblxyXG5mdW5jdGlvbiBkZXNjKGEsIGIsIG9yZGVyQnkpIHtcclxuICBpZiAoYltvcmRlckJ5XSA8IGFbb3JkZXJCeV0pIHtcclxuICAgIHJldHVybiAtMTtcclxuICB9XHJcbiAgaWYgKGJbb3JkZXJCeV0gPiBhW29yZGVyQnldKSB7XHJcbiAgICByZXR1cm4gMTtcclxuICB9XHJcbiAgcmV0dXJuIDA7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIHN0YWJsZVNvcnQoYXJyYXksIGNtcCkge1xyXG4gIGNvbnN0IHN0YWJpbGl6ZWRUaGlzID0gYXJyYXkubWFwKChlbCwgaW5kZXgpID0+IFtlbCwgaW5kZXhdKTtcclxuXHJcbiAgc3RhYmlsaXplZFRoaXMuc29ydCgoYSwgYikgPT4ge1xyXG4gICAgY29uc3Qgb3JkZXIgPSBjbXAoYVswXSwgYlswXSk7XHJcbiAgICBpZiAob3JkZXIgIT09IDApIHJldHVybiBvcmRlcjtcclxuICAgIHJldHVybiBhWzFdIC0gYlsxXTtcclxuICB9KTtcclxuXHJcbiAgcmV0dXJuIHN0YWJpbGl6ZWRUaGlzLm1hcChlbCA9PiBlbFswXSk7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIGdldFNvcnRpbmcob3JkZXIsIG9yZGVyQnkpIHtcclxuICByZXR1cm4gb3JkZXIgPT09IFwiZGVzY1wiXHJcbiAgICA/IChhLCBiKSA9PiBkZXNjKGEsIGIsIG9yZGVyQnkpXHJcbiAgICA6IChhLCBiKSA9PiAtZGVzYyhhLCBiLCBvcmRlckJ5KTtcclxufVxyXG5cclxuZnVuY3Rpb24gSnBUYWJsZUJvZHkoe1xyXG4gIGNvbHVtbnNEYXRhLFxyXG4gIHRhYmxlU2V0dGluZyxcclxuICB1c2Vyc0RhdGEsXHJcbiAgc2VhcmNoU3dpdGNoLFxyXG4gIGhhbmRsZUNsaWNrLFxyXG4gIG9uRWRpdENsaWNrLFxyXG4gIG9uUmVtb3ZlQ2xpY2tcclxufSkge1xyXG4gIGNvbnN0IGNsYXNzZXMgPSB1c2VTdHlsZXMoKTtcclxuXHJcbiAgLy9jb250ZXh0IEFQSSBTVEFSVFxyXG4gIGNvbnN0IHsgc3RhdGUgfSA9IFJlYWN0LnVzZUNvbnRleHQoTWFpblRhYmxlQ29udGV4dCk7XHJcbiAgY29uc3QgeyBvcmRlciwgb3JkZXJCeSwgc2VsZWN0ZWQsIHBhZ2UsIHJvd3NQZXJQYWdlLCBzZWFyY2hUZXJtLCBtdWx0aVNlYXJjaFRlcm1zIH0gPSBzdGF0ZTtcclxuICAvL2NvbnRleHQgQVBJIEVORFxyXG5cclxuICBjb25zdCBpc1NlbGVjdGVkID0gaWQgPT4gc2VsZWN0ZWQuaW5kZXhPZihpZCkgIT09IC0xO1xyXG5cclxuICBjb25zdCBlbXB0eVJvd3MgPVxyXG4gICAgcm93c1BlclBhZ2UgLSBNYXRoLm1pbihyb3dzUGVyUGFnZSwgdXNlcnNEYXRhLmxlbmd0aCAtIHBhZ2UgKiByb3dzUGVyUGFnZSk7XHJcblxyXG4gIHJldHVybiAoXHJcbiAgICA8VGFibGVCb2R5PlxyXG4gICAgICB7c3RhYmxlU29ydChcclxuICAgICAgICBzZWFyY2hTd2l0Y2goc2VhcmNoVGVybSwgbXVsdGlTZWFyY2hUZXJtcywgdXNlcnNEYXRhKSxcclxuICAgICAgICBnZXRTb3J0aW5nKG9yZGVyLCBvcmRlckJ5KVxyXG4gICAgICApXHJcbiAgICAgICAgLnNsaWNlKHBhZ2UgKiByb3dzUGVyUGFnZSwgcGFnZSAqIHJvd3NQZXJQYWdlICsgcm93c1BlclBhZ2UpXHJcbiAgICAgICAgLm1hcCgocm93LCBpbmRleCkgPT4ge1xyXG4gICAgICAgICAgY29uc3QgaXNJdGVtU2VsZWN0ZWQgPSBpc1NlbGVjdGVkKHJvdy5pZCk7XHJcbiAgICAgICAgICBjb25zdCBsYWJlbElkID0gYGVuaGFuY2VkLXRhYmxlLWNoZWNrYm94LSR7aW5kZXh9YDtcclxuXHJcbiAgICAgICAgICByZXR1cm4gKFxyXG4gICAgICAgICAgICA8VGFibGVSb3dcclxuICAgICAgICAgICAgICBob3ZlclxyXG4gICAgICAgICAgICAgIHJvbGU9XCJjaGVja2JveFwiXHJcbiAgICAgICAgICAgICAgYXJpYS1jaGVja2VkPXtpc0l0ZW1TZWxlY3RlZH1cclxuICAgICAgICAgICAgICB0YWJJbmRleD17LTF9XHJcbiAgICAgICAgICAgICAga2V5PXtpbmRleH1cclxuICAgICAgICAgICAgICBzZWxlY3RlZD17aXNJdGVtU2VsZWN0ZWR9XHJcbiAgICAgICAgICAgID5cclxuICAgICAgICAgICAgICA8VGFibGVDZWxsIHBhZGRpbmc9XCJjaGVja2JveFwiPlxyXG4gICAgICAgICAgICAgICAgPENoZWNrYm94XHJcbiAgICAgICAgICAgICAgICAgIGNoZWNrZWQ9e2lzSXRlbVNlbGVjdGVkfVxyXG4gICAgICAgICAgICAgICAgICBpbnB1dFByb3BzPXt7IFwiYXJpYS1sYWJlbGxlZGJ5XCI6IGxhYmVsSWQgfX1cclxuICAgICAgICAgICAgICAgICAgb25DbGljaz17ZXZlbnQgPT4gaGFuZGxlQ2xpY2soZXZlbnQsIHJvdy5pZCl9XHJcbiAgICAgICAgICAgICAgICAvPlxyXG4gICAgICAgICAgICAgIDwvVGFibGVDZWxsPlxyXG4gICAgICAgICAgICAgIHtjb2x1bW5zRGF0YS5tYXAoKGRhdGEsIGluZGV4KSA9PiB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gKFxyXG4gICAgICAgICAgICAgICAgICA8VGFibGVDZWxsIGNvbXBvbmVudD1cInRoXCIga2V5PXtpbmRleH0+XHJcbiAgICAgICAgICAgICAgICAgICAge3Jvd1tjb2x1bW5zRGF0YVtpbmRleF0uaWRdfVxyXG4gICAgICAgICAgICAgICAgICA8L1RhYmxlQ2VsbD5cclxuICAgICAgICAgICAgICAgICk7XHJcbiAgICAgICAgICAgICAgfSl9XHJcblxyXG4gICAgICAgICAgICAgIHt0YWJsZVNldHRpbmcuaGFzRWRpdGluZyA/IChcclxuICAgICAgICAgICAgICAgIDxUYWJsZUNlbGwgY2xhc3NOYW1lPXtjbGFzc2VzLnRhYmxlQ2VsbH0+XHJcbiAgICAgICAgICAgICAgICAgIDxDcmVhdGVJY29uXHJcbiAgICAgICAgICAgICAgICAgICAgb25DbGljaz17KCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgICAgb25FZGl0Q2xpY2socm93KVxyXG4gICAgICAgICAgICAgICAgICAgIH19XHJcbiAgICAgICAgICAgICAgICAgIC8+XHJcbiAgICAgICAgICAgICAgICA8L1RhYmxlQ2VsbD5cclxuICAgICAgICAgICAgICApIDogbnVsbH1cclxuXHJcbiAgICAgICAgICAgICAge3RhYmxlU2V0dGluZy5oYXNEZWxldGluZyA/IChcclxuICAgICAgICAgICAgICAgIDxUYWJsZUNlbGwgY2xhc3NOYW1lPXtjbGFzc2VzLnRhYmxlQ2VsbH0+XHJcbiAgICAgICAgICAgICAgICAgIDxEZWxldGVTaGFycEljb25cclxuICAgICAgICAgICAgICAgICAgICBvbkNsaWNrPXsoKSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICBvblJlbW92ZUNsaWNrKHJvdylcclxuICAgICAgICAgICAgICAgICAgICB9fVxyXG4gICAgICAgICAgICAgICAgICAvPlxyXG4gICAgICAgICAgICAgICAgPC9UYWJsZUNlbGw+XHJcbiAgICAgICAgICAgICAgKSA6IG51bGx9XHJcbiAgICAgICAgICAgIDwvVGFibGVSb3c+XHJcbiAgICAgICAgICApO1xyXG4gICAgICAgIH0pfVxyXG4gICAgICB7ZW1wdHlSb3dzID4gMCAmJiAoXHJcbiAgICAgICAgPFRhYmxlUm93IHN0eWxlPXt7IGhlaWdodDogNDkgKiBlbXB0eVJvd3MgfX0+XHJcbiAgICAgICAgICA8VGFibGVDZWxsIGNvbFNwYW49ezZ9IC8+XHJcbiAgICAgICAgPC9UYWJsZVJvdz5cclxuICAgICAgKX1cclxuICAgIDwvVGFibGVCb2R5PlxyXG4gICk7XHJcbn1cclxuXHJcbkpwVGFibGVCb2R5LnByb3RvdHlwZXMgPSB7XHJcbiAgY29sdW1uc0RhdGE6IFByb3BUeXBlcy5hcnJheS5pc1JlcXVpcmVkLFxyXG4gIHRhYmxlU2V0dGluZzogUHJvcFR5cGVzLm9iamVjdC5pc1JlcXVpcmVkLFxyXG4gIHVzZXJzRGF0YTogUHJvcFR5cGVzLmFycmF5LmlzUmVxdWlyZWQsXHJcbiAgc2VhcmNoU3dpdGNoOiBQcm9wVHlwZXMuZnVuYy5pc1JlcXVpcmVkLFxyXG4gIGhhbmRsZUNsaWNrOiBQcm9wVHlwZXMuZnVuYy5pc1JlcXVpcmVkLFxyXG4gIG9uRWRpdENsaWNrOiBQcm9wVHlwZXMuZnVuYyxcclxuICBvblJlbW92ZUNsaWNrOiBQcm9wVHlwZXMuZnVuYyxcclxufTtcclxuXHJcbmV4cG9ydCBkZWZhdWx0IEpwVGFibGVCb2R5O1xyXG4iXX0=